<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pro r/place 2048</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background:#dcdcdc;
    font-family:Arial;
}

#palette{
    position:fixed;
    bottom:0;
    width:100%;
    height:110px;
    background:#222;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-wrap:wrap;
}

.color{
    width:36px;
    height:36px;
    margin:4px;
    cursor:pointer;
    border:2px solid transparent;
}

.color.selected{
    border:2px solid white;
}

#zoomControls{
    position:fixed;
    right:15px;
    top:50%;
    transform:translateY(-50%);
}

.zoomBtn{
    width:50px;
    height:50px;
    margin:10px 0;
    font-size:22px;
    background:#333;
    color:white;
    border:none;
    cursor:pointer;
}

#selectedColorBox{
    position:fixed;
    top:15px;
    right:15px;
    width:65px;
    height:65px;
    border:4px solid black;
}
</style>
</head>

<body>

<canvas id="viewCanvas"></canvas>
<div id="selectedColorBox"></div>

<div id="zoomControls">
<button class="zoomBtn" onclick="zoomIn()">+</button>
<button class="zoomBtn" onclick="zoomOut()">-</button>
</div>

<div id="palette"></div>

<script>

/* ======================
   AYARLAR
====================== */
const MAP_SIZE = 2048;
const PALET_HEIGHT = 110;

let scale = 8;
let offsetX = 0;
let offsetY = 0;
let dragging = false;
let dragStartX, dragStartY;

const viewCanvas = document.getElementById("viewCanvas");
const viewCtx = viewCanvas.getContext("2d");

viewCanvas.width = window.innerWidth;
viewCanvas.height = window.innerHeight - PALET_HEIGHT;

/* ======================
   GERÇEK MAP CANVAS
====================== */
const mapCanvas = document.createElement("canvas");
mapCanvas.width = MAP_SIZE;
mapCanvas.height = MAP_SIZE;
const mapCtx = mapCanvas.getContext("2d");

/* Başlangıç beyaz map */
mapCtx.fillStyle = "#ffffff";
mapCtx.fillRect(0,0,MAP_SIZE,MAP_SIZE);

/* ======================
   36 RENK
====================== */
const colors = [
"#000000","#3c3c3c","#787878","#b4b4b4","#ffffff",
"#ff0000","#c80000","#960000","#ff6464","#ff9696",
"#00ff00","#00c800","#009600","#64ff64","#96ff96",
"#0000ff","#0000c8","#000096","#6464ff","#9696ff",
"#ffff00","#c8c800","#969600",
"#ff00ff","#c800c8","#960096",
"#00ffff","#00c8c8","#009696",
"#ff8000","#c86400","#964b00",
"#8000ff","#6400c8","#4b0096",
"#ffc0cb"
];

let selectedColor = "#000000";
document.getElementById("selectedColorBox").style.background = selectedColor;

/* ======================
   PALET OLUŞTUR
====================== */
const palette = document.getElementById("palette");

colors.forEach(color=>{
    const div = document.createElement("div");
    div.className="color";
    div.style.background=color;

    div.onclick=()=>{
        selectedColor=color;
        document.getElementById("selectedColorBox").style.background=color;

        document.querySelectorAll(".color").forEach(c=>c.classList.remove("selected"));
        div.classList.add("selected");
    };

    palette.appendChild(div);
});

/* ======================
   ÇİZİM
====================== */
function draw(){
    viewCtx.setTransform(1,0,0,1,0,0);
    viewCtx.clearRect(0,0,viewCanvas.width,viewCanvas.height);

    viewCtx.setTransform(scale,0,0,scale,offsetX,offsetY);
    viewCtx.drawImage(mapCanvas,0,0);
}

draw();

/* ======================
   BOYAMA
====================== */
viewCanvas.addEventListener("click",(e)=>{
    const rect = viewCanvas.getBoundingClientRect();
    const x = (e.clientX - rect.left - offsetX)/scale;
    const y = (e.clientY - rect.top - offsetY)/scale;

    mapCtx.fillStyle = selectedColor;
    mapCtx.fillRect(Math.floor(x),Math.floor(y),1,1);

    draw();
});

/* ======================
   SÜRÜKLEME
====================== */
viewCanvas.addEventListener("mousedown",(e)=>{
    dragging=true;
    dragStartX=e.clientX-offsetX;
    dragStartY=e.clientY-offsetY;
});

viewCanvas.addEventListener("mousemove",(e)=>{
    if(dragging){
        offsetX=e.clientX-dragStartX;
        offsetY=e.clientY-dragStartY;
        draw();
    }
});

viewCanvas.addEventListener("mouseup",()=>dragging=false);
viewCanvas.addEventListener("mouseleave",()=>dragging=false);

/* ======================
   ZOOM
====================== */
function zoomIn(){
    scale*=1.2;
    draw();
}

function zoomOut(){
    scale/=1.2;
    draw();
}

</script>
</body>
</html>
